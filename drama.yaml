version: "0.1.0"
namespace: "demo.hello-world"
operators:
    - name: "DownloadAllNames"
      image: "drama-docker-helloworld"
      files:
          outputs:
              - src: "results/all-names.txt"
                type: "TextFile"
                dst: "store::www.gutenberg.org/all-names.txt"
                tags: ["namesFile"]
      commands:
          - "python code/download.py --outputfile=results/all-names.txt"
    - name: "DownloadFemaleNames"
      image: "drama-docker-helloworld"
      files:
          outputs:
              - src: "results/female-names.txt"
                type: "TextFile"
                dst: "store::www.gutenberg.org/female-names.txt"
                tags: ["namesFile"]
      commands:
          - "python code/download.py --gender=female --outputfile=results/female-names.txt"
    - name: "DownloadMaleNames"
      image: "drama-docker-helloworld"
      files:
          outputs:
              - src: "results/male-names.txt"
                type: "TextFile"
                dst: "store::www.gutenberg.org/male-names.txt"
                tags: ["namesFile"]
      commands:
          - "python code/download.py --gender=male --outputfile=results/male-names.txt"
    - name: "SampleNames"
      image: "drama-docker-helloworld"
      files:
          inputs:
              - src: "namesFile"
                type: "TextFile"
                dst: "data/names.txt"
          outputs:
              - src: "results/name-sample.txt"
                type: "TempFile"
                dst: "rundir::names.txt"
                tags: ["namesSampleFile"]
      parameters:
          - name: "size"
            type: "int"
            default: 10
          - name: "randomState"
            type: "int"
      commands:
          - "python code/sample.py --inputfile=data/names.txt --size=${size} --rand=${randomState} --outputfile=results/name-sample.txt"
    - name: "SayHello"
      image: "drama-docker-helloworld"
      files:
          inputs:
              - src: "namesSampleFile"
                type: "TempFile"
                dst: "data/names.txt"
          outputs:
              - src: "results/greetings.txt"
                type: "TextFile"
                dst: "rundir::greetings.txt"
      parameters:
          - name: "greeting"
            type: "str"
            default: "Hello"
          - name: "sleeptime"
            type: "float"
            default: 1.0
      commands:
          - "python code/helloworld.py --inputfile=data/names.txt --greeting='${greeting}' --sleeptime=${sleeptime} --outputfile=results/greetings.txt"
dockerImages:
    - tag: "drama-docker-helloworld"
      baseImage: "python:3.8"
      requirements:
          - "argparse"
          - "requests"
      files:
          - src: "code/"
            dst: "code/"
